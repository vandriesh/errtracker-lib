# ErrTracker Library

[![Build Status](https://travis-ci.com/vandriesh/errtracker-lib.svg?branch=master)](https://travis-ci.com/vandriesh/errtracker-lib)
[![Coverage Status](https://coveralls.io/repos/github/vandriesh/errtracker-lib/badge.svg?branch=master)](https://coveralls.io/github/vandriesh/errtracker-lib?branch=master)

## Usage scenarios

1. Report to slack every error. Might create some slack distractions.
2. Report `first of its kind` error only. Per device. 
    Since the info about errors are kept in device's localstorage (if supported).
3. Report every error and store it in AWS. Working on it.    

## Config

### Slack details

| Parameter name   | type (default value)   | mandatory | description                       |
|------------------|--------|-----------|-----------------------------------|
| webHookUrl       | string | true      | slack webhook generated by slack  |
| useConsoleLogger | boolean (false) | false     | false     | details you might need to provide |
| details          | object | false     | details you might need to provide |


### AWS example

| Parameter name   | type   | mandatory | description                       |
|------------------|--------|-----------|-----------------------------------|
| token            | string | true      | id to store error                 |
| useConsoleLogger | boolean| false     | report about server side response, can provide custom logger |
| url              | string | false     | where error was thrown            |
| details          | object | false     | details you might need to provide |

## Config samples

### Slack every error report
```html
  <script src="/path/to/errtracker-slack-lib.es5.js"></script>
  <script>
    (function(et, d, n) {
      if (!et) {
        return
      }

      et({
        webHookUrl: 'https://hooks.slack.com/services/some_unique_id'',
        details: {
          platform: n.platform,
          userAgent: n.userAgent,
          url: d.location
        }
      });
    })(window['slackErrTracker'], window.document, window.navigator);
  </script>
```

### Slack unique error report only example
```html
<script src="/path/to/errtracker-unique-slack-lib.es5.js"></script>
<script>
  (function(et, d, n) {
    if (!et) {
      return
    }

    et({
      // YOUR SLACK WEBHOOK (mandatory) goes here
      webHookUrl: 'https://hooks.slack.com/services/some_unique_id',
      // ADDITIONAL DETAILS (optional)
      details: {
        platform: n.platform,
        userAgent: n.userAgent,
        url: d.location
      }
    });
  })(window['uniqueSlackErrTracker'], window.document, window.navigator);
</script>
```


### AWS example

```html
<script src="/path/to/errtracker-lib.es5.js"></script>
<script>
(function(et, d, n) {
  if (!et) {
    return
  }
  et({
    // mandatory
    token: 'xxxxxx-xxxx-xx-xxx-xxxxxxxxx',
    // the rest below are optional
    useConsoleLogger: true,
    url: d.location,
    details: {
      platform: n.platform,
      userAgent: n.userAgent
    }
  });
})(window['errtracker'], window.document, window.navigator);
</script>
```
